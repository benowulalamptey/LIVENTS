<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Producer v17</title>
  <style>
    body {
      margin: 0;
      background: #000;
      color: #fff;
      font-family: Arial, sans-serif;
    }

    #topbar {
      padding: 8px 12px;
      background: #111;
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 14px;
      border-bottom: 1px solid #333;
    }

    #topbar select,
    #topbar button {
      padding: 6px 10px;
      border-radius: 4px;
      border: 1px solid #444;
      background: #222;
      color: #fff;
      cursor: pointer;
    }

    #topbar .label {
      font-weight: bold;
      color: #ddd;
    }

    #layout {
      height: calc(100vh - 44px);
      display: grid;
      gap: 4px;
      padding: 4px;
      box-sizing: border-box;
    }

    /* Super Admin layout: 5 rows => 40%, 20%, 20%, 10%, 10% approx */
    .role-superadmin {
      grid-template-rows: 4fr 2fr 2fr 1fr 1fr;
      grid-template-columns: 1fr;
    }

    /* Normal producers: P1 (50%), P2 (25%), P3 (25%) */
    .role-p2,
    .role-p3 {
      grid-template-rows: 2fr 1fr 1fr;
      grid-template-columns: 1fr;
    }

    /* Special producers: own feed 40%, then P1/P2/P3 20% each */
    .role-spep1,
    .role-spep2 {
      grid-template-rows: 2fr 1fr 1fr 1fr;
      grid-template-columns: 1fr;
    }

    .tile {
      background: #111;
      border: 1px solid #333;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-size: 14px;
      box-sizing: border-box;
    }

    .hidden {
      display: none;
    }

    .tile-content {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .tile-label {
      font-weight: bold;
      font-size: 13px;
      color: #eee;
    }

    .tile-source {
      font-size: 12px;
      color: #aaa;
    }

    .mic-badge {
      display: inline-block;
      padding: 2px 6px;
      background: #3a7bfd;
      border-radius: 4px;
      font-size: 11px;
      margin-top: 4px;
    }
  </style>
</head>

<body>

  <div id="topbar">
    <span class="label">Role:</span>
    <select id="roleSelect">
      <option value="superadmin">Super Admin</option>
      <option value="p2">Producer 2 (P2)</option>
      <option value="p3">Producer 3 (P3)</option>
      <option value="spep1">Special Producer 1 (SP1)</option>
      <option value="spep2">Special Producer 2 (SP2)</option>
    </select>

    <span class="label">Current Admin:</span>
    <select id="adminSelect">
      <option value="superadmin">Super Admin</option>
      <option value="p2">Producer 2 (P2)</option>
      <option value="p3">Producer 3 (P3)</option>
    </select>

    <span id="micInfo" class="mic-badge">Mic: Super Admin only</span>
  </div>

  <div id="layout" class="role-superadmin">
    <!-- Super Admin & normal producers: P1, P2, P3 -->
    <!-- Special producers: top tile shows "Your feed (SP1/SP2)" instead -->

    <!-- Row 1 (or row 2+ for SPEP): Picture 1 / Admin -->
    <div id="tile-p1" class="tile">
      <div class="tile-content">
        <div class="tile-label" id="label-p1">Picture 1 (Admin)</div>
        <div class="tile-source" id="source-p1">Source: Super Admin</div>
        <div class="tile-source">This is the 60%/40% main picture on viewers.</div>
      </div>
    </div>

    <!-- Row 2: Picture 2 -->
    <div id="tile-p2" class="tile">
      <div class="tile-content">
        <div class="tile-label">Picture 2</div>
        <div class="tile-source">Source: Producer 2</div>
      </div>
    </div>

    <!-- Row 3: Picture 3 -->
    <div id="tile-p3" class="tile">
      <div class="tile-content">
        <div class="tile-label">Picture 3</div>
        <div class="tile-source">Source: Producer 3</div>
      </div>
    </div>

    <!-- Row 4: SP1 (visible only to Super Admin) -->
    <div id="tile-sp1" class="tile">
      <div class="tile-content">
        <div class="tile-label">SP1 (Special Picture 1)</div>
        <div class="tile-source">Source: Special Producer 1</div>
      </div>
    </div>

    <!-- Row 5: SP2 (visible only to Super Admin) -->
    <div id="tile-sp2" class="tile">
      <div class="tile-content">
        <div class="tile-label">SP2 (Special Picture 2)</div>
        <div class="tile-source">Source: Special Producer 2</div>
      </div>
    </div>

    <!-- Special producer self-feed tile (SPEP1 / SPEP2) -->
    <div id="tile-spep-self" class="tile hidden">
      <div class="tile-content">
        <div class="tile-label" id="label-spep-self">Your camera feed (SP)</div>
        <div class="tile-source">This occupies 40% of your producer screen.</div>
      </div>
    </div>
  </div>

  <script>
    const layoutEl = document.getElementById('layout');
    const roleSelect = document.getElementById('roleSelect');
    const adminSelect = document.getElementById('adminSelect');
    const micInfo = document.getElementById('micInfo');

    const tileP1 = document.getElementById('tile-p1');
    const tileP2 = document.getElementById('tile-p2');
    const tileP3 = document.getElementById('tile-p3');
    const tileSP1 = document.getElementById('tile-sp1');
    const tileSP2 = document.getElementById('tile-sp2');
    const tileSPEPSelf = document.getElementById('tile-spep-self');
    const labelP1 = document.getElementById('label-p1');
    const sourceP1 = document.getElementById('source-p1');
    const labelSpepSelf = document.getElementById('label-spep-self');

    function updateRoleLayout() {
      const role = roleSelect.value;

      // Reset all tiles visible, then hide selectively
      tileP1.classList.remove('hidden');
      tileP2.classList.remove('hidden');
      tileP3.classList.remove('hidden');
      tileSP1.classList.remove('hidden');
      tileSP2.classList.remove('hidden');
      tileSPEPSelf.classList.add('hidden');

      layoutEl.classList.remove(
        'role-superadmin',
        'role-p2',
        'role-p3',
        'role-spep1',
        'role-spep2'
      );

      if (role === 'superadmin') {
        layoutEl.classList.add('role-superadmin');
        tileSP1.classList.remove('hidden');
        tileSP2.classList.remove('hidden');
        tileSPEPSelf.classList.add('hidden');
        micInfo.textContent = 'Mic: Super Admin only';
      } else if (role === 'p2') {
        layoutEl.classList.add('role-p2');
        tileSP1.classList.add('hidden');
        tileSP2.classList.add('hidden');
        tileSPEPSelf.classList.add('hidden');
        micInfo.textContent = 'Mic: Super Admin only (you are P2)';
      } else if (role === 'p3') {
        layoutEl.classList.add('role-p3');
        tileSP1.classList.add('hidden');
        tileSP2.classList.add('hidden');
        tileSPEPSelf.classList.add('hidden');
        micInfo.textContent = 'Mic: Super Admin only (you are P3)';
      } else if (role === 'spep1') {
        layoutEl.classList.add('role-spep1');
        tileSP1.classList.add('hidden');
        tileSP2.classList.add('hidden');
        tileSPEPSelf.classList.remove('hidden');
        labelSpepSelf.textContent = 'Your camera feed (SP1)';
        micInfo.textContent = 'Mic: Super Admin only (you are SP1)';
      } else if (role === 'spep2') {
        layoutEl.classList.add('role-spep2');
        tileSP1.classList.add('hidden');
        tileSP2.classList.add('hidden');
        tileSPEPSelf.classList.remove('hidden');
        labelSpepSelf.textContent = 'Your camera feed (SP2)';
        micInfo.textContent = 'Mic: Super Admin only (you are SP2)';
      }
    }

    function updateAdminLabel() {
      const value = adminSelect.value;
      let adminName = 'Super Admin';

      if (value === 'p2') adminName = 'Producer 2 (P2)';
      if (value === 'p3') adminName = 'Producer 3 (P3)';

      labelP1.textContent = 'Picture 1 (Admin: ' + adminName + ')';
      sourceP1.textContent = 'Source: ' + adminName;

      // NOTE: In a future step, this selection will be sent to the backend
      // so that viewers automatically see the new P1 feed.
    }

    roleSelect.addEventListener('change', () => {
      updateRoleLayout();
    });

    adminSelect.addEventListener('change', () => {
      updateAdminLabel();
    });

    // Initial render
    updateRoleLayout();
    updateAdminLabel();
  </script>

</body>
</html>
