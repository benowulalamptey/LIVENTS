<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Producer v17.1</title>
  <style>
    body {
      margin: 0;
      background: #000;
      color: #fff;
      font-family: Arial, sans-serif;
    }

    #topbar {
      padding: 8px 12px;
      background: #111;
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 14px;
      border-bottom: 1px solid #333;
    }

    #topbar select,
    #topbar button {
      padding: 6px 10px;
      border-radius: 4px;
      border: 1px solid #444;
      background: #222;
      color: #fff;
      cursor: pointer;
    }

    #topbar .label {
      font-weight: bold;
      color: #ddd;
    }

    #topbar .mic-badge {
      display: inline-block;
      padding: 2px 6px;
      background: #3a7bfd;
      border-radius: 4px;
      font-size: 11px;
      margin-left: auto;
    }

    /* Main layout: 2 columns, left big tile, right stacked tiles */
    #layout {
      height: calc(100vh - 44px);
      display: grid;
      gap: 4px;
      padding: 4px;
      box-sizing: border-box;
    }

    /* Column width ratios per role */
    body.role-superadmin #layout {
      grid-template-columns: 40% 60%;
    }

    body.role-p2 #layout,
    body.role-p3 #layout {
      grid-template-columns: 50% 50%;
    }

    body.role-spep1 #layout,
    body.role-spep2 #layout {
      grid-template-columns: 40% 60%;
    }

    #left-column,
    #right-column {
      height: 100%;
    }

    #left-column {
      display: flex;
      flex-direction: column;
    }

    #right-column {
      display: grid;
      gap: 4px;
    }

    /* Right column row heights per role */
    body.role-superadmin #right-column {
      grid-template-rows: 2fr 2fr 1fr 1fr; /* P2, P3, SP1, SP2 */
    }

    body.role-p2 #right-column,
    body.role-p3 #right-column {
      grid-template-rows: 1fr 1fr; /* P2, P3 */
    }

    body.role-spep1 #right-column,
    body.role-spep2 #right-column {
      grid-template-rows: 1fr 1fr 1fr; /* P1 small, P2, P3 */
    }

    .tile {
      background: #111;
      border: 1px solid #333;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-size: 14px;
      box-sizing: border-box;
    }

    .tile-content {
      display: flex;
      flex-direction: column;
      gap: 4px;
      padding: 4px;
    }

    .tile-label {
      font-weight: bold;
      font-size: 13px;
      color: #eee;
    }

    .tile-source {
      font-size: 12px;
      color: #aaa;
    }

    .hidden {
      display: none;
    }
  </style>
</head>

<body class="role-superadmin">

  <div id="topbar">
    <span class="label">Role:</span>
    <select id="roleSelect">
      <option value="superadmin">Super Admin</option>
      <option value="p2">Producer 2 (P2)</option>
      <option value="p3">Producer 3 (P3)</option>
      <option value="spep1">Special Producer 1 (SP1)</option>
      <option value="spep2">Special Producer 2 (SP2)</option>
    </select>

    <span class="label">Current Admin:</span>
    <select id="adminSelect">
      <option value="superadmin">Super Admin</option>
      <option value="p2">Producer 2 (P2)</option>
      <option value="p3">Producer 3 (P3)</option>
    </select>

    <span id="micInfo" class="mic-badge">Mic: Super Admin only</span>
  </div>

  <div id="layout">
    <!-- LEFT COLUMN: main big tile (P1 or SP self) -->
    <div id="left-column">
      <div id="tile-main" class="tile">
        <div class="tile-content">
          <div class="tile-label" id="label-main">Picture 1 (Admin)</div>
          <div class="tile-source" id="source-main">Source: Super Admin</div>
          <div class="tile-source" id="desc-main">
            Main big picture on viewers (Admin feed).
          </div>
        </div>
      </div>
    </div>

    <!-- RIGHT COLUMN: stacked tiles -->
    <div id="right-column">
      <!-- Small P1 tile (only used for special producers) -->
      <div id="tile-p1-small" class="tile hidden">
        <div class="tile-content">
          <div class="tile-label" id="label-p1-small">Picture 1 (Admin)</div>
          <div class="tile-source" id="source-p1-small">Source: Super Admin</div>
        </div>
      </div>

      <!-- P2 tile -->
      <div id="tile-p2" class="tile">
        <div class="tile-content">
          <div class="tile-label">Picture 2</div>
          <div class="tile-source">Source: Producer 2 (P2)</div>
        </div>
      </div>

      <!-- P3 tile -->
      <div id="tile-p3" class="tile">
        <div class="tile-content">
          <div class="tile-label">Picture 3</div>
          <div class="tile-source">Source: Producer 3 (P3)</div>
        </div>
      </div>

      <!-- SP1 tile (Super Admin only) -->
      <div id="tile-sp1" class="tile">
        <div class="tile-content">
          <div class="tile-label">SP1 (Special Picture 1)</div>
          <div class="tile-source">Source: Special Producer 1 (SP1)</div>
        </div>
      </div>

      <!-- SP2 tile (Super Admin only) -->
      <div id="tile-sp2" class="tile">
        <div class="tile-content">
          <div class="tile-label">SP2 (Special Picture 2)</div>
          <div class="tile-source">Source: Special Producer 2 (SP2)</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const bodyEl = document.body;
    const roleSelect = document.getElementById('roleSelect');
    const adminSelect = document.getElementById('adminSelect');
    const micInfo = document.getElementById('micInfo');

    const tileMain = document.getElementById('tile-main');
    const labelMain = document.getElementById('label-main');
    const sourceMain = document.getElementById('source-main');
    const descMain = document.getElementById('desc-main');

    const tileP1Small = document.getElementById('tile-p1-small');
    const labelP1Small = document.getElementById('label-p1-small');
    const sourceP1Small = document.getElementById('source-p1-small');

    const tileP2 = document.getElementById('tile-p2');
    const tileP3 = document.getElementById('tile-p3');
    const tileSP1 = document.getElementById('tile-sp1');
    const tileSP2 = document.getElementById('tile-sp2');

    function getAdminName() {
      const val = adminSelect.value;
      if (val === 'p2') return 'Producer 2 (P2)';
      if (val === 'p3') return 'Producer 3 (P3)';
      return 'Super Admin';
    }

    function updateAdminLabels() {
      const adminName = getAdminName();

      // For roles where main tile shows P1:
      const role = roleSelect.value;
      if (role === 'superadmin' || role === 'p2' || role === 'p3') {
        labelMain.textContent = 'Picture 1 (Admin: ' + adminName + ')';
        sourceMain.textContent = 'Source: ' + adminName;
        descMain.textContent = 'Main big picture on viewers (Admin feed).';
      }

      // Small P1 tile used in special producer modes
      labelP1Small.textContent = 'Picture 1 (Admin: ' + adminName + ')';
      sourceP1Small.textContent = 'Source: ' + adminName;
    }

    function updateRoleLayout() {
      const role = roleSelect.value;

      // Reset body role classes
      bodyEl.classList.remove(
        'role-superadmin',
        'role-p2',
        'role-p3',
        'role-spep1',
        'role-spep2'
      );

      tileP1Small.classList.add('hidden');
      tileP2.classList.remove('hidden');
      tileP3.classList.remove('hidden');
      tileSP1.classList.add('hidden');
      tileSP2.classList.add('hidden');

      if (role === 'superadmin') {
        bodyEl.classList.add('role-superadmin');
        // Left = P1 (Admin)
        labelMain.textContent = 'Picture 1 (Admin: ' + getAdminName() + ')';
        sourceMain.textContent = 'Source: ' + getAdminName();
        descMain.textContent = 'Main big picture on viewers (Admin feed).';
        // Right = P2, P3, SP1, SP2
        tileSP1.classList.remove('hidden');
        tileSP2.classList.remove('hidden');
        micInfo.textContent = 'Mic: Super Admin only';
      } else if (role === 'p2') {
        bodyEl.classList.add('role-p2');
        // Left = P1 (Admin)
        labelMain.textContent = 'Picture 1 (Admin: ' + getAdminName() + ')';
        sourceMain.textContent = 'Source: ' + getAdminName();
        descMain.textContent = 'Main big picture on viewers (Admin feed).';
        // Right = P2, P3 (no SP tiles)
        tileSP1.classList.add('hidden');
        tileSP2.classList.add('hidden');
        tileP1Small.classList.add('hidden');
        micInfo.textContent = 'Mic: Super Admin only (you are P2)';
      } else if (role === 'p3') {
        bodyEl.classList.add('role-p3');
        labelMain.textContent = 'Picture 1 (Admin: ' + getAdminName() + ')';
        sourceMain.textContent = 'Source: ' + getAdminName();
        descMain.textContent = 'Main big picture on viewers (Admin feed).';
        tileSP1.classList.add('hidden');
        tileSP2.classList.add('hidden');
        tileP1Small.classList.add('hidden');
        micInfo.textContent = 'Mic: Super Admin only (you are P3)';
      } else if (role === 'spep1') {
        bodyEl.classList.add('role-spep1');
        // Left = SP1 self feed
        labelMain.textContent = 'Your camera feed (SP1)';
        sourceMain.textContent = 'Source: Special Producer 1 (SP1)';
        descMain.textContent = 'You are SP1. Viewers may see you as Special Picture 1.';
        // Right = P1 small + P2 + P3
        tileP1Small.classList.remove('hidden');
        tileP2.classList.remove('hidden');
        tileP3.classList.remove('hidden');
        tileSP1.classList.add('hidden');
        tileSP2.classList.add('hidden');
        micInfo.textContent = 'Mic: Super Admin only (you are SP1)';
      } else if (role === 'spep2') {
        bodyEl.classList.add('role-spep2');
        // Left = SP2 self feed
        labelMain.textContent = 'Your camera feed (SP2)';
        sourceMain.textContent = 'Source: Special Producer 2 (SP2)';
        descMain.textContent = 'You are SP2. Viewers may see you as Special Picture 2.';
        // Right = P1 small + P2 + P3
        tileP1Small.classList.remove('hidden');
        tileP2.classList.remove('hidden');
        tileP3.classList.remove('hidden');
        tileSP1.classList.add('hidden');
        tileSP2.classList.add('hidden');
        micInfo.textContent = 'Mic: Super Admin only (you are SP2)';
      }

      updateAdminLabels();
    }

    roleSelect.addEventListener('change', () => {
      updateRoleLayout();
    });

    adminSelect.addEventListener('change', () => {
      updateAdminLabels();
    });

    // Initial render
    updateRoleLayout();
  </script>

</body>
</html>
